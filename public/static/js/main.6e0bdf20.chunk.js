(this["webpackJsonpreact-admin-client"]=this["webpackJsonpreact-admin-client"]||[]).push([[0],{344:function(e,t,n){},437:function(e,t,n){},439:function(e,t,n){},440:function(e,t,n){},465:function(e,t,n){},477:function(e,t,n){},583:function(e,t,n){},584:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(42),s=n.n(c),i=n(86),o=n(64),l=n(130),u=n(305),d=n(76),h=n(213),p=n.n(h),j="user_key",m=function(e){p.a.set(j,e)},b="set_head_title",f="receive_user",O="show_error_msg",x="reset_user";var g=p.a.get(j)||{};var y=Object(l.combineReducers)({headTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u9996\u9875",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.data;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.user;case O:var n=t.errorMsg;return Object(d.a)(Object(d.a)({},e),{},{errorMsg:n});case x:return{};default:return e}}}),v=n(306),w=Object(l.createStore)(y,Object(v.composeWithDevTools)(Object(l.applyMiddleware)(u.a))),k=n(22),S=n(23),C=n(25),N=n(24),I=n(46),T=(n(57),n(27)),_=(n(114),n(32)),A=(n(89),n(44)),R=n(20),M=n.n(R),P=n(34),U=(n(344),n.p+"static/media/logo.f6487143.png"),D=n(592),F=n(593),L=n(183),E=(n(115),n(41)),V=n(231),q=n.n(V);function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,r){("GET"===t?q.a.get(e,{params:n}):q.a.post(e,n)).then((function(e){a(e.data)})).catch((function(e){E.b.error("\u8bf7\u6c42\u51fa\u9519:"+e.message)}))}))}var W=function(e){return z("/manage/category/list","GET",{parentId:e})},J=function(e,t){return z("/manage/category/add","POST",{categoryName:e,parentId:t})},K=function(e){return z("/manage/category/update","POST",{categoryId:e.categoryId,categoryName:e.categoryName})},Y=function(e,t){return z("/manage/product/list","GET",{pageNum:e,pageSize:t})},H=function(e){var t=e.pageNum,n=e.pageSize,a=e.searchName,r=e.searchType;return z("/manage/product/search","GET",Object(L.a)({pageNum:t,pageSize:n},r,a))},B=function(e){return z("/manage/category/info","GET",{categoryId:e})},G=function(e,t){return z("/manage/product/updateStatus","POST",{productId:e,status:t})},Q=function(e){return z("/manage/img/delete","POST",{name:e})},X=function(e){return z("/manage/product/"+(e._id?"update":"add"),"POST",e)},Z=function(){return z("/manage/user/list","GET")},$=function(e){return z("/manage/user/delete","POST",{userId:e})},ee=function(e){return z("/manage/role/add","POST",{roleName:e})},te=function(e){return z("/manage/role/update","POST",e)},ne=function(e,t){return z("/login","POST",{username:e,password:t})},ae=function(e){return z("/manage/user/"+(e._id?"update":"add"),"POST",e)},re=function(){return z("https://restapi.amap.com/v3/ip?key=d0eda560cdbc8201917f247318227c73","GET")},ce=function(e){return z("https://restapi.amap.com/v3/weather/weatherInfo?city=".concat(e,"&key=d0eda560cdbc8201917f247318227c73"),"GET")},se=function(e){return{type:b,data:e}},ie=function(e){return{type:f,user:e}},oe=function(){return p.a.remove(j),{type:x}},le=n(5),ue=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onFinish=function(){var t=Object(P.a)(M.a.mark((function t(n){var a,r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.username,r=n.password,e.props.login(a,r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.validatePwd=function(e,t){return t?t.length<4?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4"):t.length>12?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12"):/^[a-zA-Z0-9_$]+/.test(t)?Promise.resolve():Promise.reject("\u5bc6\u7801\u5fc5\u987b\u662f\u5b57\u7b26\u4e32\u6570\u5b57\u4e0b\u5212\u7ebf"):Promise.reject("\u5fc5\u987b\u8f93\u5165\u5bc6\u7801")},e}return Object(S.a)(n,[{key:"render",value:function(){var e=this.props.user;return e&&e._id?Object(le.jsx)(I.a,{to:"/home"}):Object(le.jsxs)("div",{className:"login",children:[Object(le.jsxs)("header",{className:"login-header",children:[Object(le.jsx)("img",{src:U,alt:"logo\u56fe\u6807"}),Object(le.jsx)("h1",{children:"React\u9879\u76ee\uff1a\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"})]}),Object(le.jsxs)("section",{className:"login-content",children:[Object(le.jsx)("div",{className:e.errorMsg?"error-msg show":"error-msg",children:e.errorMsg}),Object(le.jsx)("h2",{children:"\u7528\u6237\u767b\u5f55"}),Object(le.jsxs)(_.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:this.onFinish,form:this.form,children:[Object(le.jsx)(_.a.Item,{name:"username",rules:[{required:!0,whitespace:!0,message:"\u5fc5\u987b\u8f93\u5165\u7528\u6237\u540d"},{min:4,message:"\u7528\u6237\u540d\u81f3\u5c114\u4f4d"},{max:12,message:"\u7528\u6237\u540d\u6700\u591a12\u4f4d"},{pattern:/^[a-zA-Z0-9_$]+/,message:"\u7528\u6237\u540d\u5fc5\u987b\u662f\u5b57\u7b26\u4e32\u6570\u5b57\u4e0b\u5212\u7ebf"}],initialValue:"root",children:Object(le.jsx)(A.a,{prefix:Object(le.jsx)(D.a,{className:"site-form-item-icon"}),placeholder:"\u7528\u6237\u540d"})}),Object(le.jsx)(_.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"},{validator:this.validatePwd}],children:Object(le.jsx)(A.a,{prefix:Object(le.jsx)(F.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801"})}),Object(le.jsx)(_.a.Item,{children:Object(le.jsx)(T.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u767b\u5f55"})})]})]})]})}}]),n}(a.Component),de=Object(o.b)((function(e){return{user:e.user}}),{login:function(e,t){return function(){var n=Object(P.a)(M.a.mark((function n(a){var r,c,s;return M.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ne(e,t);case 2:0===(r=n.sent).status?(c=r.data,m(c),a(ie(c))):(s=r.msg,a({type:O,errorMsg:s}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})(ue),he=(n(433),n(146)),pe=(n(435),n(81)),je=(n(437),n(594)),me=n(595),be=n(596),fe=n(597),Oe=n(598),xe=n(599),ge=n(600),ye=n(601),ve=[{title:"\u9996\u9875",key:"/home",icon:Object(le.jsx)(je.a,{}),isPublic:!0},{title:"\u5546\u54c1",key:"/products",icon:Object(le.jsx)(me.a,{}),children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/category",icon:Object(le.jsx)(be.a,{})},{title:"\u5546\u54c1\u7ba1\u7406",key:"/product",icon:Object(le.jsx)(fe.a,{})}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/user",icon:Object(le.jsx)(D.a,{})},{title:"\u89d2\u8272\u7ba1\u7406",key:"/role",icon:Object(le.jsx)(Oe.a,{})},{title:"\u56fe\u5f62\u56fe\u8868",key:"/charts",icon:Object(le.jsx)(xe.a,{}),children:[{title:"\u67f1\u5f62\u56fe",key:"/charts/bar",icon:Object(le.jsx)(be.a,{})},{title:"\u6298\u7ebf\u56fe",key:"/charts/line",icon:Object(le.jsx)(ge.a,{})},{title:"\u997c\u56fe",key:"/charts/pie",icon:Object(le.jsx)(ye.a,{})}]}],we=pe.a.SubMenu,ke=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).hasAuth=function(t){var n=t.key,a=t.isPublic,r=e.props.user.role.menus;return!("root"!==e.props.user.role.username&&!a&&-1===r.indexOf(n))||(t.children?!!t.children.find((function(e){return-1!==r.indexOf(e.key)})):void 0)},e.getMenuNodes=function(t){var n=e.props.location.pathname;return t.reduce((function(t,a){e.hasAuth(a)&&(a.children?(a.children.find((function(e){return 0===n.indexOf(e.key)}))&&(e.openKey=a.key),t.push(Object(le.jsx)(we,{icon:a.icon,title:a.title,children:e.getMenuNodes(a.children)},a.key))):(a.key!==n&&0!==n.indexOf(a.key)||e.props.setHeadTitle(a.title),t.push(Object(le.jsx)(pe.a.Item,{icon:a.icon,children:Object(le.jsx)(i.b,{to:a.key,onClick:function(){return e.props.setHeadTitle(a.title)},children:a.title})},a.key))));return t}),[])},e}return Object(S.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.menuNodes=this.getMenuNodes(ve)}},{key:"render",value:function(){var e=this.props.location.pathname;return 0===e.indexOf("/product")&&(e="/product"),Object(le.jsxs)("div",{className:"left-nav",children:[Object(le.jsxs)(i.b,{to:"/",className:"left-nav-header",children:[Object(le.jsx)("img",{src:U,alt:"logo"}),Object(le.jsx)("h1",{children:"\u7845\u8c37\u540e\u53f0"})]}),Object(le.jsx)(pe.a,{mode:"inline",theme:"dark",selectedKeys:[e],defaultOpenKeys:[this.openKey],children:this.menuNodes})]})}}]),n}(a.Component),Se=Object(o.b)((function(e){return{user:e.user}}),{setHeadTitle:se})(Object(I.g)(ke)),Ce=(n(149),n(70));n(439);function Ne(e){if(!e)return"";var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"  \u661f\u671f"+t.getDay()}var Ie=n(160);n(440);function Te(e){return Object(le.jsx)("button",Object(d.a)(Object(d.a)({},e),{},{className:"link-button"}))}var _e=Ce.a.confirm,Ae=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={city:"",weather:"",temperature:"",currentTime:Ne(Date.now())},e.getTime=function(){e.intervalId1=setInterval((function(){var t=Ne(Date.now());e.setState({currentTime:t})}),1e3)},e.getWeather=function(){e.intervalId2=setInterval(Object(P.a)(M.a.mark((function t(){var n,a;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re();case 2:return n=t.sent,t.next=5,ce(n.adcode);case 5:a=t.sent,e.setState({city:a.lives[0].city,weather:a.lives[0].weather,temperature:a.lives[0].temperature});case 7:case"end":return t.stop()}}),t)}))),36e5)},e.getTitle=function(){var t,n=e.props.location.pathname;return ve.forEach((function(e){if(e.key===n)t=e.title;else if(e.children){var a=e.children.find((function(e){return 0===n.indexOf(e.key)}));a&&(t=a.title)}})),t},e.showConfirm=function(){_e({title:"\u786e\u5b9a\u9000\u51fa\u5417\uff1f",icon:Object(le.jsx)(Ie.a,{}),onOk:function(){e.props.logout()}})},e}return Object(S.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:return t=e.sent,e.next=5,ce(t.adcode);case 5:n=e.sent,this.setState({city:n.lives[0].city,weather:n.lives[0].weather,temperature:n.lives[0].temperature});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getTime(),this.getWeather()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId1),clearInterval(this.intervalId2)}},{key:"render",value:function(){var e=this.props.user.username,t=this.props.headTitle;return Object(le.jsxs)("div",{className:"header",children:[Object(le.jsxs)("div",{className:"header-top",children:[Object(le.jsxs)("span",{children:["\u6b22\u8fce\uff0c",e]}),Object(le.jsx)(Te,{onClick:this.showConfirm,children:"\u9000\u51fa"})]}),Object(le.jsxs)("div",{className:"header-bottom",children:[Object(le.jsx)("div",{className:"header-bottom-left",children:t}),Object(le.jsxs)("div",{className:"header-bottom-right",children:[Object(le.jsx)("span",{children:this.state.currentTime}),Object(le.jsx)("img",{src:"http://www.weather.com.cn/m/i/icon_weather/42x30/d00.gif",alt:"logo"}),Object(le.jsxs)("span",{children:["\u76ee\u524d",this.state.city,",\u5929\u6c14",this.state.weather,",\u6e29\u5ea6",this.state.temperature,"\u5ea6"]})]})]})]})}}]),n}(a.Component),Re=Object(o.b)((function(e){return{headTitle:e.headTitle,user:e.user}}),{logout:oe})(Object(I.g)(Ae)),Me=(n(85),n(40)),Pe=(n(182),n(105)),Ue=n(320),De=n(602),Fe=(n(171),n(60)),Le=_.a.Item,Ee=Fe.a.Option,Ve=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).formRef=r.a.createRef(),e}return Object(S.a)(n,[{key:"componentDidMount",value:function(){this.props.setForm(this.formRef.current)}},{key:"render",value:function(){return Object(le.jsxs)(_.a,{ref:this.formRef,children:[Object(le.jsx)(Le,{name:"parentId",initialValue:this.props.parentId,children:Object(le.jsxs)(Fe.a,{children:[Object(le.jsx)(Ee,{value:"0",children:"\u4e00\u7ea7\u5206\u7c7b"}),this.props.categorys.map((function(e){return Object(le.jsx)(Ee,{value:e._id,children:e.name},e._id)}))]})}),Object(le.jsx)(Le,{rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5206\u7c7b\u540d\u79f0"}],name:"categoryName",initialValue:"",children:Object(le.jsx)(A.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})})]})}}]),n}(a.Component),qe=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).formRef=r.a.createRef(),e}return Object(S.a)(n,[{key:"componentDidMount",value:function(){this.props.setForm(this.formRef.current)}},{key:"render",value:function(){var e=this.props.categoryName;return Object(le.jsx)(_.a,{ref:this.formRef,children:Object(le.jsx)(_.a.Item,{rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5206\u7c7b\u540d\u79f0"}],name:"categoryName",initialValue:e,children:Object(le.jsx)(A.a,{name:"categoryName",placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})})})}}]),n}(a.Component),ze=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,categorys:[],parentId:"0",parentName:"",subCategorys:[],showStatus:0},e.initColums=function(){e.columns=[{title:"\u5206\u7c7b\u540d\u79f0",dataIndex:"name"},{title:"\u64cd\u4f5c",width:"25%",render:function(t){return Object(le.jsxs)("span",{children:[Object(le.jsx)(Te,{onClick:function(){return e.showUpdate(t)},children:"\u4fee\u6539\u5206\u7c7b"}),"\xa0\xa0\xa0\xa0","0"===e.state.parentId?Object(le.jsx)(Te,{onClick:function(){return e.showSubCategorys(t)},children:"\u67e5\u770b\u5b50\u5206\u7c7b"}):null]})}}]},e.showSubCategorys=function(t){e.setState({parentId:t._id,parentName:t.name},(function(){e.getCategorys()}))},e.getCategorys=function(){var t=Object(P.a)(M.a.mark((function t(n){var a;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),n=n||e.state.parentId,t.next=4,W(n);case 4:a=t.sent,e.setState({loading:!1}),0===a.status?"0"===n?e.setState({categorys:a.data}):e.setState({subCategorys:a.data}):E.b.error("\u83b7\u53d6\u5206\u7c7b\u4fe1\u606f\u5931\u8d25");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showUpdate=function(t){e.category=t,e.setState({showStatus:2})},e.showAdd=function(){e.setState({showStatus:1})},e.addCategory=function(){e.form.validateFields().then(function(){var t=Object(P.a)(M.a.mark((function t(n){var a,r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({showStatus:0}),a=n.parentId,r=n.categoryName,console.log(a,r),J(r,a),a===e.state.parentId?e.getCategorys():"0"===a&&e.getCategorys("0");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},e.updateCategory=function(){e.form.validateFields().then(function(){var t=Object(P.a)(M.a.mark((function t(n){var a,r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({showStatus:0}),a=e.category._id,r=n.categoryName,K({categoryId:a,categoryName:r}),e.getCategorys();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},e.handleCancel=function(){e.setState({showStatus:0})},e.showCategorys=function(){e.setState({parentId:"0",parentName:"",subCategorys:[]})},e}return Object(S.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.initColums()}},{key:"componentDidMount",value:function(){this.getCategorys()}},{key:"render",value:function(){var e=this,t=this.state,n=t.categorys,a=t.parentId,r=t.loading,c=t.subCategorys,s=t.parentName,i=t.showStatus,o=this.category||{},l=Object(le.jsx)(T.a,{type:"primary",icon:Object(le.jsx)(Ue.a,{}),onClick:this.showAdd,style:{width:110},children:"\u6dfb\u52a0"}),u="0"===a?"\u4e00\u7ea7\u5206\u7c7b\u6807\u9898":Object(le.jsxs)("span",{children:[Object(le.jsx)(Te,{onClick:this.showCategorys,children:"\u4e00\u7ea7\u5206\u7c7b\u6807\u9898"}),Object(le.jsx)(De.a,{style:{marginRight:5}}),Object(le.jsx)("span",{children:s})]});return Object(le.jsxs)(Me.a,{title:u,extra:l,style:{width:"100%"},children:[Object(le.jsx)(Pe.a,{loading:r,rowKey:"_id",dataSource:"0"===a?n:c,bordered:!0,columns:this.columns,pagination:{defaultPageSize:7,showQuickJumper:!0}}),Object(le.jsx)(Ce.a,{destroyOnClose:!0,title:"\u6dfb\u52a0\u5206\u7c7b",visible:1===i,onOk:this.addCategory,onCancel:this.handleCancel,children:Object(le.jsx)(Ve,{categorys:n,parentId:a,setForm:function(t){e.form=t}})}),Object(le.jsx)(Ce.a,{destroyOnClose:!0,title:"\u66f4\u65b0\u5206\u7c7b",visible:2===i,onOk:this.updateCategory,onCancel:this.handleCancel,children:Object(le.jsx)(qe,{categoryName:o.name,setForm:function(t){e.form=t}})})]})}}]),n}(a.Component),We="http://localhost:5000/upload/",Je=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).formRef=r.a.createRef(),e}return Object(S.a)(n,[{key:"componentDidMount",value:function(){this.props.setForm(this.formRef.current)}},{key:"render",value:function(){var e=this.props,t=e.roles,n=e.user;return Object(le.jsxs)(_.a,Object(d.a)(Object(d.a)({ref:this.formRef},{labelCol:{span:4},wrapperCol:{span:20}}),{},{children:[Object(le.jsx)(_.a.Item,{label:"\u7528\u6237\u540d:",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u7528\u6237\u540d"}],name:"username",initialValue:n.username,children:Object(le.jsx)(A.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),n._id?Object(le.jsx)(_.a.Item,{label:"\u5bc6\u7801:",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5bc6\u7801"}],name:"password",initialValue:n.password,children:Object(le.jsx)(A.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})}):Object(le.jsx)(_.a.Item,{label:"\u5bc6\u7801:",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5bc6\u7801"}],name:"password",initialValue:n.password,children:Object(le.jsx)(A.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})}),Object(le.jsx)(_.a.Item,{label:"\u624b\u673a\u53f7:",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u624b\u673a\u53f7"}],name:"phone",initialValue:n.phone,children:Object(le.jsx)(A.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"})}),Object(le.jsx)(_.a.Item,{label:"\u90ae\u7bb1:",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u90ae\u7bb1"}],name:"email",initialValue:n.email,children:Object(le.jsx)(A.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"})}),Object(le.jsx)(_.a.Item,{label:"\u89d2\u8272:",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u7528\u6237\u540d"}],name:"role_id",initialValue:n.role_id,children:Object(le.jsx)(Fe.a,{children:t.map((function(e){return Object(le.jsx)(Fe.a.Option,{value:e._id,children:e.name},e._id)}))})})]}))}}]),n}(a.PureComponent),Ke=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={users:[],isShow:!1,roles:[]},e.initColumns=function(){e.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7535\u8bdd",dataIndex:"phone"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",render:Ne},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_id",render:function(t){return e.roleNames[t]}},{title:"\u64cd\u4f5c",render:function(t){return Object(le.jsxs)("span",{children:[Object(le.jsx)(Te,{onClick:function(){e.showUpdate(t)},children:"\u4fee\u6539"}),Object(le.jsx)(Te,{onClick:function(){e.deleteUser(t)},children:"\u5220\u9664"})]})}}]},e.addOrUpdateUser=Object(P.a)(M.a.mark((function t(){var n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.form.getFieldsValue(),e.form.resetFields(),e.user&&(n._id=e.user._id),t.next=5,ae(n);case 5:0===t.sent.status?(E.b.success("".concat(e.user?"\u4fee\u6539":"\u6dfb\u52a0","\u7528\u6237\u6210\u529f")),e.setState({isShow:!1}),e.getUsers()):E.b.error("".concat(e.user?"\u4fee\u6539":"\u6dfb\u52a0","\u7528\u6237\u5931\u8d25"));case 7:case"end":return t.stop()}}),t)}))),e.showUpdate=function(t){e.user=t,e.setState({isShow:!0})},e.deleteUser=function(t){Ce.a.confirm({title:"\u786e\u5b9a\u8981\u5220\u9664".concat(t.username,"\u7528\u6237\u5417\uff1f"),icon:Object(le.jsx)(Ie.a,{}),onOk:function(){var n=Object(P.a)(M.a.mark((function n(){return M.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$(t._id);case 2:0===n.sent.status?(E.b.success("\u5220\u9664\u7528\u6237\u6210\u529f"),e.getUsers()):E.b.error("\u5220\u9664\u7528\u6237\u5931\u8d25");case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()})},e.showAdd=function(){e.user={},e.setState({isShow:!0})},e.initRoleNames=function(t){var n=t.reduce((function(e,t){return e[t._id]=t.name,e}),{});e.roleNames=n},e.getUsers=Object(P.a)(M.a.mark((function t(){var n,a,r,c;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z();case 2:0===(n=t.sent).status&&(a=n.data,r=a.users,c=a.roles,e.initRoleNames(c),e.setState({users:r,roles:c}));case 4:case"end":return t.stop()}}),t)}))),e}return Object(S.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this,t=this.state,n=t.users,a=t.isShow,r=t.roles,c=this.user||{},s=Object(le.jsx)(T.a,{type:"primary",onClick:this.showAdd,children:"\u521b\u5efa\u7528\u6237"});return Object(le.jsxs)(Me.a,{title:s,children:[Object(le.jsx)(Pe.a,{rowKey:"_id",dataSource:n,bordered:!0,columns:this.columns,pagination:{defaultPageSize:5,showQuickJumper:!0}}),Object(le.jsx)(Ce.a,{destroyOnClose:!0,title:c._id?"\u4fee\u6539\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",visible:a,onOk:this.addOrUpdateUser,onCancel:function(){e.form.resetFields(),e.setState({isShow:!1})},children:Object(le.jsx)(Je,{setForm:function(t){return e.form=t},roles:r,user:c})})]})}}]),n}(a.Component),Ye=n(124),He=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={sales:[5,20,16,10,10,20],stores:[3,5,16,5,20,30]},e.update=function(){e.setState((function(e){return{sales:e.sales.map((function(e){return e+1})),stores:e.stores.reduce((function(e,t){return e.push(t-1),e}),[])}}))},e.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"bar",data:e},{name:"\u5e93\u5b58",type:"bar",data:t}]}},e}return Object(S.a)(n,[{key:"render",value:function(){var e=this.state,t=e.sales,n=e.stores;return Object(le.jsxs)("div",{children:[Object(le.jsx)(Me.a,{children:Object(le.jsx)(T.a,{type:"primary",onClick:this.update,children:"\u66f4\u65b0"})}),Object(le.jsx)(Me.a,{title:"\u67f1\u72b6\u56fe\u4e00",children:Object(le.jsx)(Ye.a,{option:this.getOption(t,n)})})]})}}]),n}(a.Component),Be=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).getOption1=function(){return{backgroundColor:"#2c343c",title:{text:"Customized Pie",left:"center",top:20,textStyle:{color:"#ccc"}},tooltip:{trigger:"item"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:274,name:"\u8054\u76df\u5e7f\u544a"},{value:235,name:"\u89c6\u9891\u5e7f\u544a"},{value:400,name:"\u641c\u7d22\u5f15\u64ce"}].sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{color:"rgba(255, 255, 255, 0.3)"},labelLine:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20},itemStyle:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}},e.getOption2=function(){return{title:{text:"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:"\u7eaf\u5c5e\u865a\u6784",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"50%",data:[{value:1048,name:"\u641c\u7d22\u5f15\u64ce"},{value:735,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:580,name:"\u90ae\u4ef6\u8425\u9500"},{value:484,name:"\u8054\u76df\u5e7f\u544a"},{value:300,name:"\u89c6\u9891\u5e7f\u544a"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},e}return Object(S.a)(n,[{key:"render",value:function(){return Object(le.jsxs)("div",{children:[Object(le.jsx)(Me.a,{title:"\u997c\u56fe\u4e00",children:Object(le.jsx)(Ye.a,{option:this.getOption1()})}),Object(le.jsx)(Me.a,{title:"\u997c\u56fe\u4e8c",children:Object(le.jsx)(Ye.a,{option:this.getOption2()})})]})}}]),n}(a.Component),Ge=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={sales:[5,20,16,10,10,20],stores:[3,5,16,5,20,30]},e.update=function(){e.setState((function(e){return{sales:e.sales.map((function(e){return e+1})),stores:e.stores.reduce((function(e,t){return e.push(t-1),e}),[])}}))},e.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"line",data:e},{name:"\u5e93\u5b58",type:"line",data:t}]}},e}return Object(S.a)(n,[{key:"render",value:function(){var e=this.state,t=e.sales,n=e.stores;return Object(le.jsxs)("div",{children:[Object(le.jsx)(Me.a,{children:Object(le.jsx)(T.a,{type:"primary",onClick:this.update,children:"\u66f4\u65b0"})}),Object(le.jsx)(Me.a,{title:"\u67f1\u72b6\u56fe\u4e00",children:Object(le.jsx)(Ye.a,{option:this.getOption(t,n)})})]})}}]),n}(a.Component),Qe=(n(459),n(112)),Xe=(n(585),n(235)),Ze=(n(586),n(315)),$e=(n(465),n(603)),et=n(604),tt=n(98),nt=n(82),at=n.n(nt),rt=Ze.a.RangePicker,ct=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){var e=Object(le.jsx)("h2",{style:{fontSize:30},children:"1,128,163\u4e2a"}),t=Object(le.jsxs)("div",{className:"title2",children:[Object(le.jsx)("h2",{style:{fontSize:30},children:"\u8bbf\u95ee\u91cf\xa0\xa0\xa0\xa0\xa0\u9500\u552e\u91cf"}),Object(le.jsx)(rt,{style:{width:400,height:40},defaultValue:[at()("2021/06/01","YYYY/MM/DD"),at()("2021/06/16","YYYY/MM/DD")],format:"YYYY/MM/DD"})]});return Object(le.jsxs)("div",{className:"home",children:[Object(le.jsxs)("div",{className:"top",children:[Object(le.jsxs)(Me.a,{title:"\u5546\u54c1\u603b\u6570",style:{width:300,height:250,margin:20},children:[Object(le.jsx)(Xe.a,{title:e,value:"\u5468\u540c\u6bd415%",precision:2,valueStyle:{color:"#3f8600"},suffix:Object(le.jsx)($e.a,{})}),Object(le.jsx)(Xe.a,{value:"\u65e5\u540c\u6bd49%",precision:2,valueStyle:{color:"#cf1322"},suffix:Object(le.jsx)(et.a,{})})]}),Object(le.jsxs)(tt.Chart,{scale:{temperature:{min:0},city:{formatter:function(e){return{London:"\u4f26\u6566",Tokyo:"\u4e1c\u4eac"}[e]}}},padding:[30,20,60,40],autoFit:!0,width:1200,height:300,data:[{month:"Jan",city:"Tokyo",temperature:7},{month:"Jan",city:"London",temperature:3.9},{month:"Feb",city:"Tokyo",temperature:6.9},{month:"Feb",city:"London",temperature:4.2},{month:"Mar",city:"Tokyo",temperature:9.5},{month:"Mar",city:"London",temperature:5.7},{month:"Apr",city:"Tokyo",temperature:14.5},{month:"Apr",city:"London",temperature:8.5},{month:"May",city:"Tokyo",temperature:18.4},{month:"May",city:"London",temperature:11.9},{month:"Jun",city:"Tokyo",temperature:21.5},{month:"Jun",city:"London",temperature:15.2},{month:"Jul",city:"Tokyo",temperature:25.2},{month:"Jul",city:"London",temperature:17},{month:"Aug",city:"Tokyo",temperature:26.5},{month:"Aug",city:"London",temperature:16.6},{month:"Sep",city:"Tokyo",temperature:23.3},{month:"Sep",city:"London",temperature:14.2},{month:"Oct",city:"Tokyo",temperature:18.3},{month:"Oct",city:"London",temperature:10.3},{month:"Nov",city:"Tokyo",temperature:13.9},{month:"Nov",city:"London",temperature:6.6},{month:"Dec",city:"Tokyo",temperature:9.6},{month:"Dec",city:"London",temperature:4.8}],interactions:["element-active"],children:[Object(le.jsx)(tt.Point,{position:"month*temperature",color:"city",shape:"circle"}),Object(le.jsx)(tt.Line,{shape:"smooth",position:"month*temperature",color:"city",label:"temperature"}),Object(le.jsx)(tt.Tooltip,{shared:!0,showCrosshairs:!0}),Object(le.jsx)(tt.Legend,{background:{padding:[5,100,5,36],style:{fill:"#eaeaea",stroke:"#fff"}}})]})]}),Object(le.jsx)(Me.a,{title:t,style:{width:1600,height:1e3,margin:20},children:Object(le.jsxs)("div",{className:"bottom",children:[Object(le.jsx)(Me.a,{title:"\u8bbf\u95ee\u8d8b\u52bf",style:{width:900,height:700,margin:20},children:Object(le.jsxs)(tt.Chart,{height:300,autoFit:!0,data:[{year:"1951 \u5e74",sales:0},{year:"1952 \u5e74",sales:52},{year:"1956 \u5e74",sales:61},{year:"1957 \u5e74",sales:45},{year:"1958 \u5e74",sales:48},{year:"1959 \u5e74",sales:38},{year:"1960 \u5e74",sales:38},{year:"1962 \u5e74",sales:38}],children:[Object(le.jsx)(tt.Interval,{position:"year*sales"}),Object(le.jsx)(tt.Tooltip,{shared:!0})]})}),Object(le.jsxs)(Me.a,{title:"\u4efb\u52a1",style:{width:500,height:700,margin:20},children:[Object(le.jsxs)(Qe.a,{children:[Object(le.jsx)(Qe.a.Item,{color:"green",children:"Create a services site 2015-09-01"}),Object(le.jsx)(Qe.a.Item,{color:"green",children:"Create a services site 2015-09-01"}),Object(le.jsxs)(Qe.a.Item,{color:"red",children:[Object(le.jsx)("p",{children:"Solve initial network problems 1"}),Object(le.jsx)("p",{children:"Solve initial network problems 2"}),Object(le.jsx)("p",{children:"Solve initial network problems 3 2015-09-01"})]}),Object(le.jsxs)(Qe.a.Item,{children:[Object(le.jsx)("p",{children:"Technical testing 1"}),Object(le.jsx)("p",{children:"Technical testing 2"}),Object(le.jsx)("p",{children:"Technical testing 3 2015-09-01"})]}),Object(le.jsxs)(Qe.a.Item,{color:"gray",children:[Object(le.jsx)("p",{children:"Technical testing 1"}),Object(le.jsx)("p",{children:"Technical testing 2"}),Object(le.jsx)("p",{children:"Technical testing 3 2015-09-01"})]}),Object(le.jsxs)(Qe.a.Item,{color:"gray",children:[Object(le.jsx)("p",{children:"Technical testing 1"}),Object(le.jsx)("p",{children:"Technical testing 2"}),Object(le.jsx)("p",{children:"Technical testing 3 2015-09-01"})]})]}),","]})]})})]})}}]),n}(a.Component),st=(n(477),n(478),n(319)),it=n(159),ot=n(184),lt=n(605),ut=(n(587),n(316)),dt=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(e){var a;Object(k.a)(this,n),(a=t.call(this,e)).state={previewVisible:!1,previewImage:"",fileList:[]},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(){var e=Object(P.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getImgs=function(){return a.state.fileList.map((function(e){return e.name}))},a.handleChange=function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r,c,s,i,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.file,r=t.fileList,"done"!==n.status){e.next=6;break}0===(c=n.response).status?(E.b.success("\u4e0a\u4f20\u56fe\u7247\u6210\u529f"),s=c.data,i=s.name,o=s.url,(n=r[r.length-1]).name=i,n.url=o):E.b.error("\u4e0a\u4f20\u56fe\u7247\u5931\u8d25"),e.next=11;break;case 6:if("removed"!==n.status){e.next=11;break}return e.next=9,Q(n.name);case 9:0===e.sent.status?E.b.success("\u5220\u9664\u56fe\u7247\u6210\u529f"):E.b.success("\u5220\u9664\u56fe\u7247\u5931\u8d25");case 11:a.setState({fileList:r});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=[],c=a.props.imgs;return c&&c.length>0&&(r=c.map((function(e,t){return{uid:-t,name:e,status:"done",url:We+e}}))),a.state={previewVisible:!1,previewImage:"",fileList:r},a}return Object(S.a)(n,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,n=e.previewImage,a=e.fileList,r=Object(le.jsxs)("div",{children:[Object(le.jsx)(Ue.a,{}),Object(le.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(le.jsxs)("div",{children:[Object(le.jsx)(ut.a,{action:"/manage/img/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:a,onPreview:this.handlePreview,onChange:this.handleChange,children:a.length>=6?null:r}),Object(le.jsx)(Ce.a,{visible:t,footer:null,onCancel:this.handleCancel,children:Object(le.jsx)("img",{alt:"example",style:{width:"100%"},src:n})})]})}}]),n}(a.Component),ht=n(122),pt=n(311),jt=(n(576),n(312)),mt=n.n(jt),bt=n(313),ft=n.n(bt),Ot=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(e){var a;Object(k.a)(this,n),(a=t.call(this,e)).onEditorStateChange=function(e){a.setState({editorState:e})},a.getDetail=function(){return mt()(Object(ht.convertToRaw)(a.state.editorState.getCurrentContent()))},a.uploadImageCallBack=function(e){return new Promise((function(t,n){var a=new XMLHttpRequest;a.open("POST","/manage/img/upload");var r=new FormData;r.append("image",e),a.send(r),a.addEventListener("load",(function(){var e=JSON.parse(a.responseText).data.url;t({data:{link:e}})})),a.addEventListener("error",(function(){var e=JSON.parse(a.responseText);n(e)}))}))};var r=a.props.detail;if(r){var c=ft()(r),s=ht.ContentState.createFromBlockArray(c.contentBlocks),i=ht.EditorState.createWithContent(s);a.state={editorState:i}}else a.state={editorState:ht.EditorState.createEmpty()};return a}return Object(S.a)(n,[{key:"render",value:function(){var e=this.state.editorState;return Object(le.jsx)(pt.Editor,{editorState:e,editorStyle:{border:"1px solid black",minHeight:200,paddingLeft:10},onEditorStateChange:this.onEditorStateChange,toolbar:{image:{uploadCallback:this.uploadImageCallBack,alt:{present:!0,mandatory:!0}}}})}}]),n}(a.Component),xt={user:{},product:{}},gt=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).state={options:[]},a.initOptions=function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r,c,s,i,o,l;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.map((function(e){return{value:e._id,label:e.name,isLeaf:!1}})),r=Object(ot.a)(a),c=r.isUpdate,s=r.product,i=s.pCategoryId,!c||0===i){e.next=10;break}return e.next=6,a.getCategorys(i);case 6:o=e.sent,l=o.map((function(e){return{value:e._id,label:e.name,isLeaf:!0}})),n.find((function(e){return e.value===i})).children=l;case 10:a.setState({options:n});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getCategorys=function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:if(0!==(n=e.sent).status){e.next=10;break}if(r=n.data,"0"!==t){e.next=9;break}a.initOptions(r),e.next=10;break;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onFinish=function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r,c,s,i,o,l,u,d,h;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.desc,c=t.price,1===(s=t.categoryIds).length?(i="0",o=s[0]):(i=s[0],o=s[1]),l=a.myRef.current.getImgs(),u=a.edtRef.current.getDetail(),d={name:n,desc:r,price:c,imgs:l,detail:u,categoryId:o,pCategoryId:i},a.isUpdate&&(d._id=a.product._id),console.log(d),e.next=9,X(d);case 9:h=e.sent,console.log(h),0===h.status?(E.b.success("".concat(a.isUpdate?"\u66f4\u65b0":"\u6dfb\u52a0","\u5546\u54c1\u6210\u529f")),a.props.history.goBack()):E.b.error("".concat(a.isUpdate?"\u66f4\u65b0":"\u6dfb\u52a0","\u5546\u54c1\u5931\u8d25"));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.validator=function(e,t){return 1*t>=0?Promise.resolve():Promise.reject("\u4e14\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0")},a.loadData=function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t[0]).loading=!0,e.next=4,a.getCategorys(n.value);case 4:r=e.sent,n.loading=!1,r&&r.length>0?(c=r.map((function(e){return{value:e._id,label:e.name,isLeaf:!0}})),n.children=c):n.isLeaf=!0,a.setState({options:Object(it.a)(a.state.options)});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.myRef=r.a.createRef(),a.edtRef=r.a.createRef(),a}return Object(S.a)(n,[{key:"componentDidMount",value:function(){this.getCategorys("0")}},{key:"componentWillUnmount",value:function(){xt.product={}}},{key:"UNSAFE_componentWillMount",value:function(){var e=xt.product;this.isUpdate=!!e._id,this.product=e||{}}},{key:"render",value:function(){var e=this,t=this.product,n=t.pCategoryId,a=t.categoryId,r=t.imgs,c=t.detail,s=[];this.isUpdate&&("0"===n||s.push(n),s.push(a));var i=Object(le.jsxs)("span",{children:[Object(le.jsx)(Te,{onClick:function(){e.props.history.goBack()},children:Object(le.jsx)(lt.a,{style:{fontSize:20,color:"rgb(17,149,122)"}})}),Object(le.jsx)(Te,{children:this.isUpdate?"\u4fee\u6539\u5546\u54c1":"\u6dfb\u52a0\u5546\u54c1"})]});return Object(le.jsx)(Me.a,{title:i,children:Object(le.jsxs)(_.a,Object(d.a)(Object(d.a)({},{labelCol:{span:2},wrapperCol:{span:8}}),{},{onFinish:this.onFinish,children:[Object(le.jsx)(_.a.Item,{label:"\u5546\u54c1\u540d\u79f0",name:"name",initialValue:this.product.name,rules:[{required:!0,message:"\u5546\u54c1\u540d\u79f0\u4e0d\u53ef\u4e3a\u7a7a"}],children:Object(le.jsx)(A.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"})}),Object(le.jsx)(_.a.Item,{label:"\u5546\u54c1\u63cf\u8ff0",initialValue:this.product.desc,name:"desc",rules:[{required:!0,message:"\u5546\u54c1\u63cf\u8ff0\u4e0d\u53ef\u4e3a\u7a7a"}],children:Object(le.jsx)(A.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"})}),Object(le.jsx)(_.a.Item,{label:"\u5546\u54c1\u4ef7\u683c",initialValue:this.product.price,name:"price",rules:[{required:!0,message:"\u5546\u54c1\u4ef7\u683c\u4e0d\u53ef\u4e3a\u7a7a"},{validator:this.validator}],children:Object(le.jsx)(A.a,{type:"number",addonAfter:"\u5143",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c"})}),Object(le.jsx)(_.a.Item,{label:"\u5546\u54c1\u5206\u7c7b",initialValue:s,name:"categoryIds",rules:[{required:!0,message:"\u5fc5\u987b\u9009\u62e9\u4e00\u4e2a\u5206\u7c7b"}],children:Object(le.jsx)(st.a,{placeholder:"\u8bf7\u6307\u5b9a\u5546\u54c1\u5206\u7c7b",options:this.state.options,loadData:this.loadData})}),Object(le.jsx)(_.a.Item,{label:"\u5546\u54c1\u56fe\u7247",name:"imgs",children:Object(le.jsx)(dt,{ref:this.myRef,imgs:r})}),Object(le.jsx)(_.a.Item,{label:"\u5546\u54c1\u8be6\u60c5",labelCol:{span:2},wrapperCol:{span:14},children:Object(le.jsx)(Ot,{ref:this.edtRef,detail:c})}),Object(le.jsx)(_.a.Item,{children:Object(le.jsx)(T.a,{style:{marginLeft:615},type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]}))})}}]),n}(a.Component),yt=(n(577),n(318)),vt=(n(579),n(113)),wt=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cName1:"",cName2:""},e}return Object(S.a)(n,[{key:"componentDidMount",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t,n,a,r,c,s,i,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=xt.product,n=t.pCategoryId,a=t.categoryId,"0"!==n){e.next=9;break}return e.next=4,B(a);case 4:r=e.sent,c=r.data.name,this.setState({cName1:c}),e.next=15;break;case 9:return e.next=11,Promise.all([B(n),B(a)]);case 11:s=e.sent,i=s[0].data.name,o=s[1].data.name,this.setState({cName1:i,cName2:o});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){xt.product={}}},{key:"render",value:function(){var e=this,t=this.state,n=t.cName1,a=t.cName2,r=xt.product,c=r.name,s=r.desc,i=r.price,o=r.detail,l=r.imgs,u=Object(le.jsxs)("span",{children:[Object(le.jsx)(Te,{onClick:function(){e.props.history.goBack()},children:Object(le.jsx)(lt.a,{style:{color:"rgb(17,149,122)",marginRight:15,fontSize:20}})}),Object(le.jsx)("span",{children:"\u5546\u54c1\u8be6\u60c5"})]});return Object(le.jsx)(Me.a,{title:u,className:"product-detail",children:Object(le.jsxs)(vt.b,{children:[Object(le.jsxs)(vt.b.Item,{className:"align",children:[Object(le.jsx)("span",{className:"left",children:"\u5546\u54c1\u540d\u79f0:"}),Object(le.jsx)("span",{children:c})]}),Object(le.jsxs)(vt.b.Item,{className:"align",children:[Object(le.jsx)("span",{className:"left",children:"\u5546\u54c1\u63cf\u8ff0:"}),Object(le.jsx)("span",{children:s})]}),Object(le.jsxs)(vt.b.Item,{className:"align",children:[Object(le.jsx)("span",{className:"left",children:"\u5546\u54c1\u4ef7\u683c:"}),Object(le.jsxs)("span",{children:["\uffe5",i]})]}),Object(le.jsxs)(vt.b.Item,{className:"align",children:[Object(le.jsx)("span",{className:"left",children:"\u6240\u5c5e\u5206\u7c7b:"}),Object(le.jsxs)("span",{children:[n,a?"--\x3e"+a:""]})]}),Object(le.jsxs)(vt.b.Item,{className:"align",children:[Object(le.jsx)("span",{className:"left",children:"\u5546\u54c1\u56fe\u7247:"}),l.map((function(e){return Object(le.jsx)(yt.a,{className:"img",src:We+e,alt:"img"},e)}))]}),Object(le.jsxs)(vt.b.Item,{className:"align",children:[Object(le.jsx)("span",{className:"left",children:"\u5546\u54c1\u8be6\u60c5:"}),Object(le.jsx)("span",{dangerouslySetInnerHTML:{__html:o}})]})]})})}}]),n}(a.Component),kt=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={total:0,products:[],loading:!1,searchName:"",searchType:"productName"},e.initColumns=function(){e.columns=[{title:"\u5546\u54c1\u540d\u79f0 ",dataIndex:"name"},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc"},{title:"\u4ef7\u683c",dataIndex:"price",render:function(e){return"\uffe5 "+e}},{title:"\u72b6\u6001 ",width:100,render:function(t){var n=t.status,a=t._id;return Object(le.jsxs)("span",{children:[Object(le.jsx)(T.a,{type:"primary",onClick:function(){return e.UpdateStatus(a,1===n?2:1)},children:1===n?"\u4e0b\u67b6":"\u4e0a\u67b6"}),Object(le.jsx)("span",{children:1===n?"\u5728\u552e":"\u552e\u7f44"})]})}},{width:100,title:"\u64cd\u4f5c ",render:function(t){return Object(le.jsxs)("span",{children:[Object(le.jsx)(Te,{onClick:function(){return e.showDetail(t)},children:"\u8be6\u60c5"}),Object(le.jsx)(Te,{onClick:function(){return e.showUpdate(t)},children:"\u4fee\u6539"})]})}}]},e.showDetail=function(t){xt.product=t,e.props.history.push("./product/detail")},e.showUpdate=function(t){xt.product=t,e.props.history.push("/product/addupdate")},e.UpdateStatus=function(){var t=Object(P.a)(M.a.mark((function t(n,a){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(n,a);case 2:0===t.sent.status&&(E.b.success("\u66f4\u65b0\u72b6\u6001\u6210\u529f"),e.getProducts(e.pageNum));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.getProducts=function(){var t=Object(P.a)(M.a.mark((function t(n){var a,r,c,s,i,o,l;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.pageNum=n,e.setState({loading:!0}),a=e.state,r=a.searchName,c=a.searchType,!r){t.next=9;break}return t.next=6,H({pageNum:n,pageSize:5,searchName:r,searchType:c});case 6:s=t.sent,t.next=12;break;case 9:return t.next=11,Y(n,5);case 11:s=t.sent;case 12:e.setState({loading:!1}),i=s.data,o=i.total,l=i.list,e.setState({total:o,products:l});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(S.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getProducts(1)}},{key:"render",value:function(){var e=this,t=this.state,n=t.products,a=t.total,r=t.loading,c=t.searchName,s=t.searchType,i=Object(le.jsxs)("span",{children:[Object(le.jsxs)(Fe.a,{value:s,style:{width:140},onChange:function(t){return e.setState({searchType:t})},children:[Object(le.jsx)(Fe.a.Option,{value:"productName",children:"\u6309\u540d\u79f0\u641c\u7d22"}),Object(le.jsx)(Fe.a.Option,{value:"productDesc",children:"\u6309\u63cf\u8ff0\u641c\u7d22"})]}),Object(le.jsx)(A.a,{onChange:function(t){return e.setState({searchName:t.target.value})},value:c,style:{width:160,margin:"0 15px"},placeholder:"\u5173\u952e\u5b57"}),Object(le.jsx)(T.a,{type:"primary",onClick:function(){e.getProducts(1)},children:"\u641c\u7d22"})]}),o=Object(le.jsx)(T.a,{type:"primary",icon:Object(le.jsx)(Ue.a,{}),onClick:function(){e.props.history.push("/product/addupdate")},children:"\u6dfb\u52a0\u5546\u54c1"});return Object(le.jsxs)(Me.a,{title:i,extra:o,children:[Object(le.jsx)(Pe.a,{loading:r,pagination:{current:this.pageNum,onChange:this.getProducts,defaultPageSize:5,total:a,showQuickJumper:!0},bordered:!0,rowKey:"_id",dataSource:n,columns:this.columns}),";"]})}}]),n}(a.Component),St=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){return Object(le.jsx)("div",{children:Object(le.jsxs)(I.d,{children:[Object(le.jsx)(I.b,{path:"/product",component:kt,exact:!0}),Object(le.jsx)(I.b,{path:"/product/addupdate",component:gt}),Object(le.jsx)(I.b,{path:"/product/detail",component:wt}),Object(le.jsx)(I.a,{to:"product"})]})})}}]),n}(a.Component),Ct=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).formRef=r.a.createRef(),e}return Object(S.a)(n,[{key:"componentDidMount",value:function(){this.props.setForm(this.formRef.current)}},{key:"render",value:function(){return Object(le.jsx)(_.a,{ref:this.formRef,children:Object(le.jsx)(_.a.Item,{label:"\u89d2\u8272\u540d\u79f0:",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u89d2\u8272\u540d\u79f0"}],name:"roleName",initialValue:"",children:Object(le.jsx)(A.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"})})})}}]),n}(a.Component),Nt=(n(581),n(317)),It=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={treeNodes:[{title:"\u5e73\u53f0\u6743\u9650",key:"all",children:[]}],checkedKey:[]},e.onCheck=function(t){e.setState({checkedKey:t})},e.getMenus=function(){return e.state.checkedKey},e}return Object(S.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.state.treeNodes;e[0].children=ve,this.setState({treeNodes:e})}},{key:"render",value:function(){var e=this.props.role;return Object(le.jsxs)(_.a,{children:[Object(le.jsx)(_.a.Item,{label:"\u89d2\u8272\u540d\u79f0:",name:"roleName",initialValue:e.name,children:Object(le.jsx)(A.a,{disabled:!0})}),Object(le.jsx)(Nt.a,{onCheck:this.onCheck,defaultCheckedKeys:e.menus,defaultExpandAll:!0,checkable:!0,treeData:this.state.treeNodes})]})}}]),n}(a.PureComponent),Tt=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).state={roles:[],role:{},isShowAdd:!1,isShowAuth:!1},a.authRef=r.a.createRef(),a.initColumn=function(){a.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",render:function(e){return Ne(e)}},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",render:Ne},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"}]},a.onRow=function(e){return{onClick:function(){a.setState({role:e})}}},a.getRoles=Object(P.a)(M.a.mark((function e(){var t,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/manage/role/list","GET");case 2:0===(t=e.sent).status&&(n=t.data,a.setState({roles:n}));case 4:case"end":return e.stop()}}),e)}))),a.addRole=function(){a.form.validateFields(["roleName"]).then(function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isShowAdd:!1}),n=t.roleName,e.next=4,ee(n);case 4:0===(r=e.sent).status?(E.b.success("\u6dfb\u52a0\u89d2\u8272\u6210\u529f"),c=r.data,a.setState({roles:[].concat(Object(it.a)(a.state.roles),[c])})):E.b.success("\u6dfb\u52a0\u89d2\u8272\u5931\u8d25");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},a.updateRole=Object(P.a)(M.a.mark((function e(){var t,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.role,n=a.authRef.current.getMenus(),t.menus=n,t.auth_time=Date.now(),t.auth_name=a.props.user.username,e.next=7,te(t);case 7:0===e.sent.status&&(a.setState({isShowAuth:!1}),t._id===a.props.user.role_id?(a.props.logout(),E.b.success("\u5f53\u524d\u7528\u6237\u89d2\u8272\u6743\u9650\u4fee\u6539\uff0c\u8bf7\u91cd\u65b0\u767b\u9646")):(E.b.success("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u6210\u529f"),a.setState({roles:Object(it.a)(a.state.roles)})));case 9:case"end":return e.stop()}}),e)}))),a.authRef=r.a.createRef(),a}return Object(S.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumn()}},{key:"componentDidMount",value:function(){this.getRoles()}},{key:"render",value:function(){var e=this,t=this.state,n=t.roles,a=t.role,r=t.isShowAdd,c=t.isShowAuth,s=Object(le.jsxs)("span",{children:[Object(le.jsx)(T.a,{type:"primary",onClick:function(){e.setState({isShowAdd:!0})},children:"\u521b\u5efa\u89d2\u8272"}),"\xa0\xa0",Object(le.jsx)(T.a,{type:"primary",onClick:function(){e.setState({isShowAuth:!0})},disabled:!a._id,children:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"})]});return Object(le.jsxs)(Me.a,{title:s,children:[Object(le.jsx)(Pe.a,{rowKey:"_id",dataSource:n,bordered:!0,rowSelection:{type:"radio",selectedRowKeys:[a._id],onSelect:function(t){return e.setState({role:t})}},onRow:this.onRow,columns:this.columns,pagination:{defaultPageSize:5,showQuickJumper:!0}}),Object(le.jsx)(Ce.a,{destroyOnClose:!0,title:"\u6dfb\u52a0\u89d2\u8272",visible:r,onOk:this.addRole,onCancel:function(){e.setState({isShowAdd:!1})},children:Object(le.jsx)(Ct,{setForm:function(t){e.form=t}})}),Object(le.jsx)(Ce.a,{destroyOnClose:!0,title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:c,onOk:this.updateRole,onCancel:function(){e.setState({isShowAuth:!1})},children:Object(le.jsx)(It,{ref:this.authRef,role:a})})]})}}]),n}(a.Component),_t=Object(o.b)((function(e){return{user:e.user}}),{logout:oe})(Tt),At=(n(254),n(110)),Rt=(n(255),n(66)),Mt=(n(583),function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).goHome=function(){e.props.history.replace("/")},e}return Object(S.a)(n,[{key:"render",value:function(){return Object(le.jsxs)(At.a,{className:"not-found",children:[Object(le.jsx)(Rt.a,{span:12,className:"left"}),Object(le.jsxs)(Rt.a,{span:12,className:"right",children:[Object(le.jsx)("h1",{children:"404"}),Object(le.jsx)("h2",{children:"\u62b1\u6b49\uff0c\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728"}),Object(le.jsx)("div",{children:Object(le.jsx)(T.a,{type:"primary",onClick:this.goHome,children:"\u56de\u5230\u9996\u9875"})})]})]})}}]),n}(a.Component)),Pt=Object(o.b)(null,{setHeadTitle:se})(Mt),Ut=he.a.Footer,Dt=he.a.Sider,Ft=he.a.Content,Lt=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){var e=this.props.user;return e&&e._id?Object(le.jsxs)(he.a,{style:{minHeight:"100%"},children:[Object(le.jsx)(Dt,{children:Object(le.jsx)(Se,{})}),Object(le.jsxs)(he.a,{children:[Object(le.jsx)(Re,{children:"Header"}),Object(le.jsx)(Ft,{style:{margin:"20px",backgroundColor:"#fff"},children:Object(le.jsxs)(I.d,{children:[Object(le.jsx)(I.a,{exact:!0,from:"/",to:"/home"}),Object(le.jsx)(I.b,{path:"/home",component:ct}),Object(le.jsx)(I.b,{path:"/category",component:ze}),Object(le.jsx)(I.b,{path:"/product",component:St}),Object(le.jsx)(I.b,{path:"/role",component:_t}),Object(le.jsx)(I.b,{path:"/user",component:Ke}),Object(le.jsx)(I.b,{path:"/charts/bar",component:He}),Object(le.jsx)(I.b,{path:"/charts/line",component:Ge}),Object(le.jsx)(I.b,{path:"/charts/pie",component:Be}),Object(le.jsx)(I.b,{component:Pt})]})}),Object(le.jsx)(Ut,{style:{textAlign:"center",color:"#ccc"},children:"\u63a8\u8350\u4f7f\u7528\u8c37\u6b4c\u6d4f\u89c8\u5668\uff0c\u53ef\u4ee5\u83b7\u5f97\u66f4\u4f73\u9875\u9762\u64cd\u4f5c\u4f53\u9a8c"})]})]}):Object(le.jsx)(I.a,{to:"/login"})}}]),n}(a.Component),Et=Object(o.b)((function(e){return{user:e.user}}),{})(Lt),Vt=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){return Object(le.jsxs)(I.d,{children:[Object(le.jsx)(I.b,{path:"/login",component:de}),Object(le.jsx)(I.b,{path:"/",component:Et})]})}}]),n}(a.Component);s.a.render(Object(le.jsx)(i.a,{children:Object(le.jsx)(o.a,{store:w,children:Object(le.jsx)(Vt,{})})}),document.getElementById("root"))}},[[584,1,2]]]);
//# sourceMappingURL=main.6e0bdf20.chunk.js.map